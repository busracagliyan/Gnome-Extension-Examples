<h2 id="how-to-create-gnome-shell-extension-">How to Create Gnome-Shell Extension?</h2>
<p>In this article, we will learn simple doing gnome-shell extension for Pardus-21 Gnome desktop. We will add an icon to the top panel with this extension and it sends us a notification when clicking the icon. </p>
<p>Firstly, we open the home folder and show the hidden files with ‘ctrl+h’. Then we go to the directory .local/share/gnome-shell/extensions. Here we create a new folder named ‘example@example.com’ in the extensions folder. We create extension.js and metadata.json files in the example@example.com. </p>
<p>Metadata.json file includes information of extension. It is written as shown below : </p>
<h3 id="metadata-json">metadata.json</h3>
<pre><code class="lang-json">{ 
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"example@example.com"</span>, 
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Example"</span>, 
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"This extension puts an icon in the panel with a simple popup menu."</span>, 
    <span class="hljs-attr">"version"</span>: <span class="hljs-number">1</span>, 
    <span class="hljs-attr">"shell-version"</span>: [ <span class="hljs-string">"3.38"</span> ], 
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">""</span> 
}
</code></pre>
<ul>
<li>Uuid: It is a unique name and must same as the folder name. </li>
<li>Name: Extension’s name. It should be short and descriptive. For example Application Menu, Extension List, Dash to Dock. </li>
<li>Description: Shortly describes what the extension is. </li>
<li>Version: Defines the version of the extension. </li>
<li>Shell-version: The version of gnome used. Pardus 21 uses gnome version 3.38. </li>
<li>Url: Generated extension&#39;s link. </li>
</ul>
<p>After creating the metadata.json file, we create the extension.js file. </p>
<h3 id="extension-js">extension.js</h3>
<pre><code class="lang-js"><span class="hljs-meta">'use strict'</span>; 

<span class="hljs-keyword">const</span> ExtensionUtils = imports.misc.extensionUtils; 
<span class="hljs-keyword">const</span> Me = ExtensionUtils.getCurrentExtension(); 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`initializing <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`enabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`disabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
}
</code></pre>
<p>The skeleton version of our extension.js file is as above. Now firstly we add the libraries we will use. </p>
<pre><code class="lang-js"><span class="hljs-meta">'use strict'</span>;  

<span class="hljs-keyword">const</span> {Gio, GLib, GObject, St} = imports.gi;  
<span class="hljs-keyword">const</span> Main = imports.ui.main; 
<span class="hljs-keyword">const</span> PanelMenu = imports.ui.panelMenu; 
<span class="hljs-keyword">const</span> PopupMenu = imports.ui.popupMenu; 

<span class="hljs-keyword">const</span> ExtensionUtils = imports.misc.extensionUtils;  
<span class="hljs-keyword">const</span> Me = ExtensionUtils.getCurrentExtension(); 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`initializing <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`enabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`disabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
}
</code></pre>
<p>Now we add an icon for our extension.</p>
<pre><code class="lang-js"><span class="hljs-meta">'use strict'</span>; 

<span class="hljs-keyword">const</span> {Gio, GLib, GObject, St} = imports.gi; 
<span class="hljs-keyword">const</span> Main = imports.ui.main;
<span class="hljs-keyword">const</span> PanelMenu = imports.ui.panelMenu;
<span class="hljs-keyword">const</span> PopupMenu = imports.ui.popupMenu;

<span class="hljs-keyword">const</span> ExtensionUtils = imports.misc.extensionUtils; 
<span class="hljs-keyword">const</span> Me = ExtensionUtils.getCurrentExtension();

<span class="hljs-keyword">let</span> Indicator = GObject.registerClass(
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Indicator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PanelMenu</span>.<span class="hljs-title">Button</span></span>{

        _init() {
            <span class="hljs-keyword">super</span>._init(<span class="hljs-number">0.0</span>, <span class="hljs-string">`<span class="hljs-subst">${Me.metadata.name}</span> Indicator`</span>, <span class="hljs-literal">false</span>);

            <span class="hljs-keyword">let</span> icon =<span class="hljs-keyword">new</span> St.Icon({
                <span class="hljs-attr">icon_name</span>: <span class="hljs-string">'face-smile-symbolic'</span>,
                <span class="hljs-attr">style_class</span>: <span class="hljs-string">'system-status-icon'</span>
            });
            <span class="hljs-keyword">this</span>.actor.add_child(icon);
        }        
});

<span class="hljs-keyword">let</span> indicator = <span class="hljs-literal">null</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`initializing <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`enabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>);

    indicator = <span class="hljs-keyword">new</span> Indicator();
    Main.panel.addToStatusArea(<span class="hljs-string">`<span class="hljs-subst">${Me.metadata.name}</span> Indicator`</span>, indicator);
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`disabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 

    <span class="hljs-keyword">if</span> (indicator !== <span class="hljs-literal">null</span>) {
        indicator.destroy();
        indicator = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p>Then we create a notification adding a popup menu to our extension.  </p>
<pre><code class="lang-js"><span class="hljs-meta">'use strict'</span>; 

<span class="hljs-keyword">const</span> {Gio, GLib, GObject, St} = imports.gi; 
<span class="hljs-keyword">const</span> Main = imports.ui.main;
<span class="hljs-keyword">const</span> PanelMenu = imports.ui.panelMenu;
<span class="hljs-keyword">const</span> PopupMenu = imports.ui.popupMenu;

<span class="hljs-keyword">const</span> ExtensionUtils = imports.misc.extensionUtils; 
<span class="hljs-keyword">const</span> Me = ExtensionUtils.getCurrentExtension();

<span class="hljs-keyword">let</span> Indicator = GObject.registerClass(
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Indicator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PanelMenu</span>.<span class="hljs-title">Button</span></span>{

        _init() {
            <span class="hljs-keyword">super</span>._init(<span class="hljs-number">0.0</span>, <span class="hljs-string">`<span class="hljs-subst">${Me.metadata.name}</span> Indicator`</span>, <span class="hljs-literal">false</span>);

            <span class="hljs-keyword">let</span> icon =<span class="hljs-keyword">new</span> St.Icon({
                <span class="hljs-attr">icon_name</span>: <span class="hljs-string">'face-smile-symbolic'</span>,
                <span class="hljs-attr">style_class</span>: <span class="hljs-string">'system-status-icon'</span>
            });
            <span class="hljs-keyword">this</span>.actor.add_child(icon);

            <span class="hljs-keyword">let</span> item = <span class="hljs-keyword">new</span> PopupMenu.PopupMenuItem(_(<span class="hljs-string">'Show Notification'</span>)); 
            item.connect(<span class="hljs-string">'activate'</span>, () =&gt; {
                Main.notify(_(<span class="hljs-string">'Whatʼs up?'</span>));
            });
            <span class="hljs-keyword">this</span>.menu.addMenuItem(item);
        }        
});

<span class="hljs-keyword">let</span> indicator = <span class="hljs-literal">null</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`initializing <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`enabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>);

    indicator = <span class="hljs-keyword">new</span> Indicator();
    Main.panel.addToStatusArea(<span class="hljs-string">`<span class="hljs-subst">${Me.metadata.name}</span> Indicator`</span>, indicator);
} 

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disable</span>(<span class="hljs-params"></span>) </span>{ 
    log(<span class="hljs-string">`disabling <span class="hljs-subst">${Me.metadata.name}</span> version <span class="hljs-subst">${Me.metadata.version}</span>`</span>); 

    <span class="hljs-keyword">if</span> (indicator !== <span class="hljs-literal">null</span>) {
        indicator.destroy();
        indicator = <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p>Finally, we run the r command doing ‘alt+f2’. We will see in there the name of our extension when we look at the tweaks app. </p>
<p><img src="https://github.com/busracagliyan/Gnome-Extension-Examples/blob/main/assets/example.drawio.png" alt="alt text"></p>
<p>Now our extension is running.</p>
<p><img src="https://github.com/busracagliyan/Gnome-Extension-Examples/blob/main/assets/screenshot1.png" alt="alt text"></p>
<hr>
<p>The second way is; </p>
<p>We create a gnome-shell extension from the terminal. To do this in the terminal: </p>
<pre><code>gnome-extensions <span class="hljs-keyword">create</span> –-interactive
</code></pre><p>We write and run.   </p>
<p>Firstly, we enter the name of our extension. </p>
<p><img src="https://github.com/busracagliyan/Gnome-Extension-Examples/blob/main/assets/screenshot2.png" alt="alt text"></p>
<p>Then we write the description of our extension. </p>
<p><img src="https://github.com/busracagliyan/Gnome-Extension-Examples/blob/main/assets/screenshot3.png" alt="alt text"></p>
<p>Final, we write the uuid and we are done. </p>
<p><img src="https://github.com/busracagliyan/Gnome-Extension-Examples/blob/main/assets/screenshot4.png" alt="alt text"></p>
<p>Now the skeleton of our extension is ready. We write code in the extension.js file as we did above and doing alt+f2 we are running our extension. </p>
<p>For more information visit the <a href="https://wiki.gnome.org/Projects/GnomeShell/Extensions">Gnome Wiki</a>.</p>
